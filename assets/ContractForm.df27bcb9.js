import{c as v,b as T,_ as V,Y as H,r as C,a as k,D as S,w as Q,a1 as y,Z as p,$ as h,a2 as u,al as I,a5 as K,am as w,ar as m,a6 as N,au as O,F as x,a3 as b,an as F}from"./index.db35648b.js";import{Q as f,C as P}from"./ThuTienForm.f853edf3.js";import{Q as G}from"./QForm.fd5fb5c2.js";var Y=v({name:"QSpace",setup(){const o=T("div",{class:"q-space"});return()=>o}});const U={name:"ContractForm",props:{hopDong:{type:Object,default:null},khachHangId:{type:Number,required:!0},mode:{type:String,default:""}},emits:["dong-dialog","luu-thong-tin"],setup(o,{emit:n}){const i=H(),a=C({id:null,khachHangId:o.khachHangId,loaiBaoHiem:null,tenGoiBaoHiem:"",ngayBatDau:"",ngayKetThuc:"",mucPhi:null,phuongThucDong:null}),s=k(()=>i.state.taiTuc.loaiBaoHiemOptions),d=[{label:"1 th\xE1ng",value:1},{label:"3 th\xE1ng",value:3},{label:"6 th\xE1ng",value:6},{label:"12 th\xE1ng",value:12},{label:"24 th\xE1ng",value:24},{label:"36 th\xE1ng",value:36},{label:"48 th\xE1ng",value:48},{label:"60 th\xE1ng",value:60}];S(()=>{if(o.hopDong)a.value={...o.hopDong};else if(o.mode==="gia-han"){const l=i.state.taiTuc.khachHangDangChon,t=i.getters["hopDong/getHopDongById"](l.hopDongId);a.value.khachHangId=o.khachHangId,a.value.ngayBatDau=e(t.ngayKetThuc),a.value.loaiBaoHiem=t.loaiBaoHiem,a.value.tenGoiBaoHiem=t.tenGoiBaoHiem,a.value.mucPhi=t.mucPhi}}),Q([()=>a.value.phuongThucDong,()=>a.value.ngayBatDau,()=>{var l;return(l=o.hopDong)==null?void 0:l.ngayKetThuc}],()=>{var l;o.mode==="gia-han"&&a.value.phuongThucDong&&a.value.ngayBatDau&&(a.value.ngayKetThuc=r(a.value.ngayBatDau,(l=o.hopDong)==null?void 0:l.ngayKetThuc,a.value.phuongThucDong))});const e=l=>{const t=new Date(l);return t.setDate(t.getDate()+1),t.toISOString().slice(0,10)},r=(l,t,B)=>{const c=new Date(t),D=new Date;let g=c;return c<=D&&(g=D),g.setMonth(g.getMonth()+B),g.setDate(g.getDate()-1),g.toISOString().slice(0,10)};return{form:a,loaiBaoHiemOptions:s,phuongThucDongOptions:d,submitForm:()=>{n("luu-thong-tin",a.value)},dongDialog:()=>{n("dong-dialog")},ngayTiepTheo:e,tinhNgayKetThuc:r}}},M={class:"text-h6"};function q(o,n,i,a,s,d){return y(),p(F,{style:{"min-width":"350px"}},{default:h(()=>[u(w,null,{default:h(()=>[I("div",M,K(i.mode==="gia-han"?"Gia h\u1EA1n h\u1EE3p \u0111\u1ED3ng":i.hopDong?"Ch\u1EC9nh s\u1EEDa h\u1EE3p \u0111\u1ED3ng":"Th\xEAm h\u1EE3p \u0111\u1ED3ng m\u1EDBi"),1)]),_:1}),u(G,{onSubmit:a.submitForm,class:"q-gutter-md"},{default:h(()=>[u(f,{modelValue:a.form.loaiBaoHiem,"onUpdate:modelValue":n[0]||(n[0]=e=>a.form.loaiBaoHiem=e),options:a.loaiBaoHiemOptions,label:"Lo\u1EA1i b\u1EA3o hi\u1EC3m","emit-value":"","map-options":"",disable:i.mode==="gia-han","lazy-rules":"",rules:[e=>e&&e.length>0||"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\u1EA3o hi\u1EC3m"]},null,8,["modelValue","options","disable","rules"]),u(m,{modelValue:a.form.tenGoiBaoHiem,"onUpdate:modelValue":n[1]||(n[1]=e=>a.form.tenGoiBaoHiem=e),label:"T\xEAn g\xF3i b\u1EA3o hi\u1EC3m","lazy-rules":"",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp t\xEAn g\xF3i"]},null,8,["modelValue","rules"]),u(m,{modelValue:a.form.ngayBatDau,"onUpdate:modelValue":n[2]||(n[2]=e=>a.form.ngayBatDau=e),label:"Ng\xE0y b\u1EAFt \u0111\u1EA7u",type:"date",disable:i.mode==="gia-han"},null,8,["modelValue","disable"]),u(m,{modelValue:a.form.ngayKetThuc,"onUpdate:modelValue":n[3]||(n[3]=e=>a.form.ngayKetThuc=e),label:"Ng\xE0y k\u1EBFt th\xFAc",type:"date",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp ng\xE0y k\u1EBFt th\xFAc",e=>e>a.form.ngayBatDau||"Ng\xE0y k\u1EBFt th\xFAc ph\u1EA3i sau ng\xE0y b\u1EAFt \u0111\u1EA7u"]},null,8,["modelValue","rules"]),u(m,{modelValue:a.form.mucPhi,"onUpdate:modelValue":n[4]||(n[4]=e=>a.form.mucPhi=e),label:"M\u1EE9c ph\xED",type:"number"},null,8,["modelValue"]),i.mode==="gia-han"?(y(),p(f,{key:0,modelValue:a.form.phuongThucDong,"onUpdate:modelValue":n[5]||(n[5]=e=>a.form.phuongThucDong=e),options:a.phuongThucDongOptions,label:"Ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e!==null||"Vui l\xF2ng ch\u1ECDn ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng"]},null,8,["modelValue","options","rules"])):N("",!0),u(O,{align:"right",class:"text-primary"},{default:h(()=>[x(u(b,{flat:"",label:"\u0110\xF3ng",onClick:a.dongDialog},null,8,["onClick"]),[[P]]),u(b,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var Z=V(U,[["render",q]]);export{Z as C,Y as Q};
