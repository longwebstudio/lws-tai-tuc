import{c as j,d as me,f as w,n as ve,j as fe,k as L,p as U,q as G,u as I,t as F,r as y,a as v,w as He,g as ie,b as S,aF as De,aV as be,H as z,E as Ce,aW as Te,x as ke,z as ye,G as xe,Y as k,a2 as M,al as b,$ as l,ao as _,_ as p,a4 as Ke,a3 as _e,a5 as Se,F as se,Z as A,aX as Ve,a1 as re,a7 as O,a0 as V,aY as J,a8 as Pe,aZ as ue,D as ce,an as Qe,a_ as we,am as qe,X as B,a$ as Le,ap as $}from"./index.b7b9640e.js";import{a as Be,Q as Me}from"./QToolbar.213929d1.js";import{C as Ae,Q as Ee}from"./ContractForm.e58d14d7.js";import{u as Ne,a as Ue,b as Ie,g as ee,s as ae,c as Fe}from"./QTabs.1b86ba0c.js";import{c as Oe,Q as Xe,d as je,e as X,a as ne}from"./rtl.ffc19a37.js";import{a as ze,C as Ye,Q as Re}from"./ClosePopup.614b3808.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import{C as We}from"./ContractList.292c2c8e.js";import{Q as Ze}from"./QForm.30b6a2eb.js";import"./ThuTienForm.280244c4.js";var oe=j({name:"QTab",props:Ne,emits:Ue,setup(e,{slots:a,emit:i}){const{renderTab:n}=Ie(e,a,i);return()=>n("div")}});function Ge(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,n)=>{const u=parseFloat(i);u&&(a[n]=u)}),a}var Je=me({name:"touch-swipe",beforeMount(e,{value:a,arg:i,modifiers:n}){if(n.mouse!==!0&&w.has.touch!==!0)return;const u=n.mouseCapture===!0?"Capture":"",o={handler:a,sensitivity:Ge(i),direction:ee(n),noop:ve,mouseStart(t){ae(t,o)&&fe(t)&&(L(o,"temp",[[document,"mousemove","move",`notPassive${u}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(t,!0))},touchStart(t){if(ae(t,o)){const c=t.target;L(o,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),o.start(t)}},start(t,c){w.is.firefox===!0&&U(e,!0);const f=G(t);o.event={x:f.left,y:f.top,time:Date.now(),mouse:c===!0,dir:!1}},move(t){if(o.event===void 0)return;if(o.event.dir!==!1){I(t);return}const c=Date.now()-o.event.time;if(c===0)return;const f=G(t),H=f.left-o.event.x,s=Math.abs(H),m=f.top-o.event.y,h=Math.abs(m);if(o.event.mouse!==!0){if(s<o.sensitivity[1]&&h<o.sensitivity[1]){o.end(t);return}}else if(window.getSelection().toString()!==""){o.end(t);return}else if(s<o.sensitivity[2]&&h<o.sensitivity[2])return;const D=s/c,T=h/c;o.direction.vertical===!0&&s<h&&s<100&&T>o.sensitivity[0]&&(o.event.dir=m<0?"up":"down"),o.direction.horizontal===!0&&s>h&&h<100&&D>o.sensitivity[0]&&(o.event.dir=H<0?"left":"right"),o.direction.up===!0&&s<h&&m<0&&s<100&&T>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&s<h&&m>0&&s<100&&T>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&s>h&&H<0&&h<100&&D>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&s>h&&H>0&&h<100&&D>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(I(t),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Oe(),o.styleCleanup=K=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const x=()=>{document.body.classList.remove("no-pointer-events--children")};K===!0?setTimeout(x,50):x()}),o.handler({evt:t,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:c,distance:{x:s,y:h}})):o.end(t)},end(t){o.event!==void 0&&(F(o,"temp"),w.is.firefox===!0&&U(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),t!==void 0&&o.event.dir!==!1&&I(t),o.event=void 0)}};if(e.__qtouchswipe=o,n.mouse===!0){const t=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}w.has.touch===!0&&L(o,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const i=e.__qtouchswipe;i!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&i.end(),i.handler=a.value),i.direction=ee(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(F(a,"main"),F(a,"temp"),w.is.firefox===!0&&U(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function $e(){let e=Object.create(null);return{getCache:(a,i)=>e[a]===void 0?e[a]=typeof i=="function"?i():i:e[a],setCache(a,i){e[a]=i},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const ea={name:{required:!0},disable:Boolean},te={setup(e,{slots:a}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},z(a.default))}},aa={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},na=["update:modelValue","beforeTransition","transition"];function oa(){const{props:e,emit:a,proxy:i}=ie(),{getCache:n}=$e();let u,o;const t=y(null),c=y(null);function f(r){const g=e.vertical===!0?"up":"left";Q((i.$q.lang.rtl===!0?-1:1)*(r.direction===g?1:-1))}const H=v(()=>[[Je,f,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),s=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),m=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),h=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),D=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),T=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),K=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);He(()=>e.modelValue,(r,g)=>{const C=d(r)===!0?N(r):-1;o!==!0&&R(C===-1?0:C<N(g)?-1:1),t.value!==C&&(t.value=C,a("beforeTransition",r,g),Ce(()=>{a("transition",r,g)}))});function x(){Q(1)}function P(){Q(-1)}function E(r){a("update:modelValue",r)}function d(r){return r!=null&&r!==""}function N(r){return u.findIndex(g=>g.props.name===r&&g.props.disable!==""&&g.props.disable!==!0)}function he(){return u.filter(r=>r.props.disable!==""&&r.props.disable!==!0)}function R(r){const g=r!==0&&e.animated===!0&&t.value!==-1?"q-transition--"+(r===-1?s.value:m.value):null;c.value!==g&&(c.value=g)}function Q(r,g=t.value){let C=g+r;for(;C!==-1&&C<u.length;){const q=u[C];if(q!==void 0&&q.props.disable!==""&&q.props.disable!==!0){R(r),o=!0,a("update:modelValue",q.props.name),setTimeout(()=>{o=!1});return}C+=r}e.infinite===!0&&u.length!==0&&g!==-1&&g!==u.length&&Q(r,r===-1?u.length:-1)}function W(){const r=N(e.modelValue);return t.value!==r&&(t.value=r),!0}function Z(){const r=d(e.modelValue)===!0&&W()&&u[t.value];return e.keepAlive===!0?[S(Te,T.value,[S(K.value===!0?n(D.value,()=>({...te,name:D.value})):te,{key:D.value,style:h.value},()=>r)])]:[S("div",{class:"q-panel scroll",style:h.value,key:D.value,role:"tabpanel"},[r])]}function de(){if(u.length!==0)return e.animated===!0?[S(De,{name:c.value},Z)]:Z()}function ge(r){return u=be(z(r.default,[])).filter(g=>g.props!==null&&g.props.slot===void 0&&d(g.props.name)===!0),u.length}function pe(){return u}return Object.assign(i,{next:x,previous:P,goTo:E}),{panelIndex:t,panelDirectives:H,updatePanelsList:ge,updatePanelIndex:W,getPanelContent:de,getEnabledPanels:he,getPanels:pe,isValidPanelName:d,keepAliveProps:T,needsUniqueKeepAliveWrapper:K,goToPanelByOffset:Q,goToPanel:E,nextPanel:x,previousPanel:P}}var le=j({name:"QTabPanel",props:ea,setup(e,{slots:a}){return()=>S("div",{class:"q-tab-panel",role:"tabpanel"},z(a.default))}}),ta=j({name:"QTabPanels",props:{...aa,...ke},emits:na,setup(e,{slots:a}){const i=ie(),n=ye(e,i.proxy.$q),{updatePanelsList:u,getPanelContent:o,panelDirectives:t}=oa(),c=v(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(u(a),xe("div",{class:c.value},o(),"pan",e.swipeable,()=>t.value))}});const la={props:{danhSachKhachHang:{type:Array,required:!0}},emits:["chon-khach-hang","them-khach-hang","sua-khach-hang","xoa-khach-hang"],setup(e,{emit:a}){const i=y(""),n=y("T\u1EA5t c\u1EA3"),u=["T\u1EA5t c\u1EA3","B\u1EA3o hi\u1EC3m x\xE3 h\u1ED9i","B\u1EA3o hi\u1EC3m y t\u1EBF","B\u1EA3o hi\u1EC3m th\u1EA5t nghi\u1EC7p"],o=v(()=>{let s=e.danhSachKhachHang;if(i.value){const m=i.value.toLowerCase();s=s.filter(h=>h.hoTen.toLowerCase().includes(m)||h.soDienThoai.includes(m)||h.email.toLowerCase().includes(m))}return n.value!=="T\u1EA5t c\u1EA3"&&(s=s.filter(m=>m.loaiBaoHiem.includes(n.value))),s});return{searchText:i,filterLoaiBaoHiem:n,loaiBaoHiemOptions:u,danhSachKhachHangLoc:o,chonKhachHang:s=>{a("chon-khach-hang",s)},themKhachHangMoi:()=>{a("them-khach-hang")},suaKhachHang:s=>{a("sua-khach-hang",s)},xoaKhachHang:s=>{a("xoa-khach-hang",s)}}}},ia={class:"row q-col-gutter-sm q-mb-md"},sa={class:"col-6"},ra={class:"col-6"},ua={class:"text-grey-8 q-gutter-xs"},ca={key:0,class:"text-center q-pa-md"};function ha(e,a,i,n,u,o){return k(),M("div",null,[b("div",ia,[b("div",sa,[l(_,{modelValue:n.searchText,"onUpdate:modelValue":a[0]||(a[0]=t=>n.searchText=t),label:"T\xECm ki\u1EBFm",dense:"",outlined:""},null,8,["modelValue"])]),b("div",ra,[l(ze,{modelValue:n.filterLoaiBaoHiem,"onUpdate:modelValue":a[1]||(a[1]=t=>n.filterLoaiBaoHiem=t),options:n.loaiBaoHiemOptions,label:"L\u1ECDc theo lo\u1EA1i b\u1EA3o hi\u1EC3m",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),l(Xe,{bordered:"",separator:""},{default:p(()=>[(k(!0),M(Ke,null,_e(n.danhSachKhachHangLoc,t=>se((k(),A(je,{key:t.id,clickable:""},{default:p(()=>[l(X,{avatar:""},{default:p(()=>[l(Ve,{icon:"person",color:"primary","text-color":"white"})]),_:1}),l(X,null,{default:p(()=>[l(ne,{onClick:c=>n.chonKhachHang(t)},{default:p(()=>[re(O(t.hoTen),1)]),_:2},1032,["onClick"]),l(ne,{caption:"",lines:"2"},{default:p(()=>[b("div",null,O(t.soDienThoai),1),b("div",null,O(t.email),1)]),_:2},1024)]),_:2},1024),l(X,{side:""},{default:p(()=>[b("div",ua,[l(V,{size:"12px",flat:"",dense:"",round:"",icon:"edit",onClick:J(c=>n.suaKhachHang(t),["stop"])},null,8,["onClick"]),l(V,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:J(c=>n.xoaKhachHang(t.id),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)),[[Pe]])),128)),n.danhSachKhachHangLoc.length?Se("",!0):(k(),M("div",ca," Kh\xF4ng c\xF3 kh\xE1ch h\xE0ng n\xE0o. "))]),_:1})])}var da=Y(la,[["render",ha]]);const ga={props:{khachHang:{type:Object,default:null}},emits:["dong-dialog","luu-thong-tin"],setup(e,{emit:a}){ue();const i=y({id:null,hoTen:"",ngaySinh:"",soDienThoai:"",email:"",diaChi:""});return ce(()=>{e.khachHang&&(i.value={...e.khachHang})}),{form:i,submitForm:()=>{a("luu-thong-tin",i.value)},dongDialog:()=>{a("dong-dialog")}}}};function pa(e,a,i,n,u,o){return k(),A(qe,{style:{"min-width":"350px"}},{default:p(()=>[l(Qe,null,{default:p(()=>a[5]||(a[5]=[b("div",{class:"text-h6"},"Th\xF4ng tin kh\xE1ch h\xE0ng",-1)])),_:1}),l(Ze,{onSubmit:n.submitForm,class:"q-gutter-md"},{default:p(()=>[l(_,{modelValue:n.form.hoTen,"onUpdate:modelValue":a[0]||(a[0]=t=>n.form.hoTen=t),label:"H\u1ECD v\xE0 t\xEAn","lazy-rules":"",rules:[t=>t&&t.length>0||"Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn"]},null,8,["modelValue","rules"]),l(_,{modelValue:n.form.ngaySinh,"onUpdate:modelValue":a[1]||(a[1]=t=>n.form.ngaySinh=t),label:"Ng\xE0y sinh",type:"date"},null,8,["modelValue"]),l(_,{modelValue:n.form.soDienThoai,"onUpdate:modelValue":a[2]||(a[2]=t=>n.form.soDienThoai=t),label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"},null,8,["modelValue"]),l(_,{modelValue:n.form.email,"onUpdate:modelValue":a[3]||(a[3]=t=>n.form.email=t),label:"Email",type:"email"},null,8,["modelValue"]),l(_,{modelValue:n.form.diaChi,"onUpdate:modelValue":a[4]||(a[4]=t=>n.form.diaChi=t),label:"\u0110\u1ECBa ch\u1EC9",type:"textarea"},null,8,["modelValue"]),l(we,{align:"right",class:"text-primary"},{default:p(()=>[se(l(V,{flat:"",label:"\u0110\xF3ng"},null,512),[[Ye]]),l(V,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var ma=Y(ga,[["render",pa]]);const va={name:"CustomerContract",components:{CustomerList:da,ContractList:We,CustomerForm:ma,ContractForm:Ae},setup(){const e=ue(),a=y("khachHang"),i=y(!1),n=y(!1),u=v(()=>e.state.khachHang.danhSachKhachHang),o=v(()=>e.state.khachHang.khachHangDangChon),t=v(()=>o.value?e.getters["hopDong/danhSachHopDongTheoKhachHangId"](o.value.id):[]),c=v(()=>e.state.hopDong.hopDongDangChon);ce(()=>{e.dispatch("khachHang/layDanhSachKhachHang"),e.dispatch("hopDong/layDanhSachHopDong")});const f=d=>{e.dispatch("khachHang/chonKhachHang",d),a.value="hopDong"},H=()=>{e.dispatch("khachHang/chonKhachHang",null),i.value=!0},s=d=>{e.dispatch("khachHang/chonKhachHang",d),i.value=!0},m=d=>{e.dispatch("khachHang/xoaKhachHang",d)},h=()=>{i.value=!1},D=d=>{d.id?e.dispatch("khachHang/suaKhachHang",d):e.dispatch("khachHang/themKhachHang",d),h()},T=()=>{e.dispatch("hopDong/chonHopDong",null),n.value=!0},K=d=>{e.dispatch("hopDong/chonHopDong",d),n.value=!0},x=d=>{e.dispatch("hopDong/xoaHopDong",d)},P=()=>{n.value=!1};return{tab:a,dialogKhachHangMo:i,dialogHopDongMo:n,danhSachKhachHang:u,khachHangDangChon:o,danhSachHopDongTheoKhachHang:t,hopDongDangChon:c,chonKhachHang:f,themKhachHangMoi:H,suaKhachHang:s,xoaKhachHang:m,dongDialogKhachHang:h,luuThongTinKhachHang:D,themHopDongMoi:T,suaHopDong:K,xoaHopDong:x,dongDialogHopDong:P,luuThongTinHopDong:d=>{d.id?e.dispatch("hopDong/suaHopDong",d):e.dispatch("hopDong/themHopDong",d),P()}}}},fa={class:"row q-col-gutter-md"},Ha={class:"col-12"},Da={class:"col-12"},ba={key:1,class:"text-center q-pa-md"};function Ca(e,a,i,n,u,o){const t=B("customer-list"),c=B("contract-list"),f=B("customer-form"),H=B("contract-form");return k(),A(Re,{class:"q-pa-md"},{default:p(()=>[b("div",fa,[b("div",Ha,[l(Me,null,{default:p(()=>[l(V,{flat:"",round:"",dense:"",icon:"menu"}),l(Be,null,{default:p(()=>a[4]||(a[4]=[re("Qu\u1EA3n l\xFD Kh\xE1ch h\xE0ng & H\u1EE3p \u0111\u1ED3ng")])),_:1}),l(Ee),l(V,{label:"Th\xEAm kh\xE1ch h\xE0ng m\u1EDBi",color:"primary",onClick:n.themKhachHangMoi},null,8,["onClick"])]),_:1})]),b("div",Da,[l(Fe,{modelValue:n.tab,"onUpdate:modelValue":a[0]||(a[0]=s=>n.tab=s),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:p(()=>[l(oe,{name:"khachHang",label:"Kh\xE1ch h\xE0ng"}),l(oe,{name:"hopDong",label:"H\u1EE3p \u0111\u1ED3ng"})]),_:1},8,["modelValue"]),l(Le),l(ta,{modelValue:n.tab,"onUpdate:modelValue":a[1]||(a[1]=s=>n.tab=s),animated:""},{default:p(()=>[l(le,{name:"khachHang"},{default:p(()=>[l(t,{"danh-sach-khach-hang":n.danhSachKhachHang,onChonKhachHang:n.chonKhachHang,onThemKhachHang:n.themKhachHangMoi,onSuaKhachHang:n.suaKhachHang,onXoaKhachHang:n.xoaKhachHang},null,8,["danh-sach-khach-hang","onChonKhachHang","onThemKhachHang","onSuaKhachHang","onXoaKhachHang"])]),_:1}),l(le,{name:"hopDong"},{default:p(()=>[n.khachHangDangChon?(k(),A(c,{key:0,"khach-hang-id":n.khachHangDangChon.id,"danh-sach-hop-dong":n.danhSachHopDongTheoKhachHang,onThemHopDong:n.themHopDongMoi,onSuaHopDong:n.suaHopDong,onXoaHopDong:n.xoaHopDong},null,8,["khach-hang-id","danh-sach-hop-dong","onThemHopDong","onSuaHopDong","onXoaHopDong"])):(k(),M("div",ba," Ch\u1ECDn m\u1ED9t kh\xE1ch h\xE0ng \u0111\u1EC3 xem danh s\xE1ch h\u1EE3p \u0111\u1ED3ng. "))]),_:1})]),_:1},8,["modelValue"])])]),l($,{modelValue:n.dialogKhachHangMo,"onUpdate:modelValue":a[2]||(a[2]=s=>n.dialogKhachHangMo=s),persistent:""},{default:p(()=>[l(f,{"khach-hang":n.khachHangDangChon,onDongDialog:n.dongDialogKhachHang,onLuuThongTin:n.luuThongTinKhachHang},null,8,["khach-hang","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"]),l($,{modelValue:n.dialogHopDongMo,"onUpdate:modelValue":a[3]||(a[3]=s=>n.dialogHopDongMo=s),persistent:""},{default:p(()=>[l(H,{"hop-dong":n.hopDongDangChon,"khach-hang-id":n.khachHangDangChon?n.khachHangDangChon.id:null,onDongDialog:n.dongDialogHopDong,onLuuThongTin:n.luuThongTinHopDong},null,8,["hop-dong","khach-hang-id","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"])]),_:1})}var wa=Y(va,[["render",Ca]]);export{wa as default};
