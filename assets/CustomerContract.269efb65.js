import{c as j,d as pe,f as w,n as fe,j as ve,k as L,p as N,q as J,u as I,t as O,r as x,a as v,w as He,g as se,b as S,aG as De,aW as be,H as z,E as Ce,aX as Te,x as ke,z as xe,G as ye,_ as Y,aY as R,Y as k,a3 as M,am as C,a0 as l,ap as K,$ as p,a5 as Ke,a4 as _e,a6 as Se,F as re,Z as A,aZ as Ve,a2 as ue,a8 as X,a1 as V,a_ as $,a9 as Pe,D as ce,ao as Qe,a$ as we,an as qe,X as B,b0 as Le,aq as ee}from"./index.c9957bda.js";import{a as Be,Q as Me}from"./QToolbar.602b92f2.js";import{C as Ae,Q as Ee}from"./ContractForm.1655db23.js";import{u as Ue,a as Ne,b as Ie,g as ae,s as ne,c as Oe}from"./QTabs.a9b87e70.js";import{c as Xe,Q as Fe,d as je,e as F,a as oe}from"./rtl.555b5e57.js";import{a as ze,C as Ye,Q as Re}from"./ClosePopup.c8c9c405.js";import{C as We}from"./ContractList.565dc2b4.js";import{Q as Ge}from"./QForm.2d1ccd35.js";import"./ThuTienForm.2c478c9c.js";var te=j({name:"QTab",props:Ue,emits:Ne,setup(e,{slots:a,emit:i}){const{renderTab:n}=Ie(e,a,i);return()=>n("div")}});function Ze(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,n)=>{const r=parseFloat(i);r&&(a[n]=r)}),a}var Je=pe({name:"touch-swipe",beforeMount(e,{value:a,arg:i,modifiers:n}){if(n.mouse!==!0&&w.has.touch!==!0)return;const r=n.mouseCapture===!0?"Capture":"",o={handler:a,sensitivity:Ze(i),direction:ae(n),noop:fe,mouseStart(t){ne(t,o)&&ve(t)&&(L(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(t,!0))},touchStart(t){if(ne(t,o)){const h=t.target;L(o,"temp",[[h,"touchmove","move","notPassiveCapture"],[h,"touchcancel","end","notPassiveCapture"],[h,"touchend","end","notPassiveCapture"]]),o.start(t)}},start(t,h){w.is.firefox===!0&&N(e,!0);const H=J(t);o.event={x:H.left,y:H.top,time:Date.now(),mouse:h===!0,dir:!1}},move(t){if(o.event===void 0)return;if(o.event.dir!==!1){I(t);return}const h=Date.now()-o.event.time;if(h===0)return;const H=J(t),D=H.left-o.event.x,u=Math.abs(D),g=H.top-o.event.y,c=Math.abs(g);if(o.event.mouse!==!0){if(u<o.sensitivity[1]&&c<o.sensitivity[1]){o.end(t);return}}else if(window.getSelection().toString()!==""){o.end(t);return}else if(u<o.sensitivity[2]&&c<o.sensitivity[2])return;const f=u/h,b=c/h;o.direction.vertical===!0&&u<c&&u<100&&b>o.sensitivity[0]&&(o.event.dir=g<0?"up":"down"),o.direction.horizontal===!0&&u>c&&c<100&&f>o.sensitivity[0]&&(o.event.dir=D<0?"left":"right"),o.direction.up===!0&&u<c&&g<0&&u<100&&b>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&u<c&&g>0&&u<100&&b>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&u>c&&D<0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&u>c&&D>0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(I(t),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Xe(),o.styleCleanup=_=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};_===!0?setTimeout(y,50):y()}),o.handler({evt:t,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:h,distance:{x:u,y:c}})):o.end(t)},end(t){o.event!==void 0&&(O(o,"temp"),w.is.firefox===!0&&N(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),t!==void 0&&o.event.dir!==!1&&I(t),o.event=void 0)}};if(e.__qtouchswipe=o,n.mouse===!0){const t=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}w.has.touch===!0&&L(o,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const i=e.__qtouchswipe;i!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&i.end(),i.handler=a.value),i.direction=ae(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(O(a,"main"),O(a,"temp"),w.is.firefox===!0&&N(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function $e(){let e=Object.create(null);return{getCache:(a,i)=>e[a]===void 0?e[a]=typeof i=="function"?i():i:e[a],setCache(a,i){e[a]=i},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const ea={name:{required:!0},disable:Boolean},le={setup(e,{slots:a}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},z(a.default))}},aa={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},na=["update:modelValue","beforeTransition","transition"];function oa(){const{props:e,emit:a,proxy:i}=se(),{getCache:n}=$e();let r,o;const t=x(null),h=x(null);function H(s){const m=e.vertical===!0?"up":"left";Q((i.$q.lang.rtl===!0?-1:1)*(s.direction===m?1:-1))}const D=v(()=>[[Je,H,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),u=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),g=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),c=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),b=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),_=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);He(()=>e.modelValue,(s,m)=>{const T=d(s)===!0?U(s):-1;o!==!0&&W(T===-1?0:T<U(m)?-1:1),t.value!==T&&(t.value=T,a("beforeTransition",s,m),Ce(()=>{a("transition",s,m)}))});function y(){Q(1)}function P(){Q(-1)}function E(s){a("update:modelValue",s)}function d(s){return s!=null&&s!==""}function U(s){return r.findIndex(m=>m.props.name===s&&m.props.disable!==""&&m.props.disable!==!0)}function he(){return r.filter(s=>s.props.disable!==""&&s.props.disable!==!0)}function W(s){const m=s!==0&&e.animated===!0&&t.value!==-1?"q-transition--"+(s===-1?u.value:g.value):null;h.value!==m&&(h.value=m)}function Q(s,m=t.value){let T=m+s;for(;T!==-1&&T<r.length;){const q=r[T];if(q!==void 0&&q.props.disable!==""&&q.props.disable!==!0){W(s),o=!0,a("update:modelValue",q.props.name),setTimeout(()=>{o=!1});return}T+=s}e.infinite===!0&&r.length!==0&&m!==-1&&m!==r.length&&Q(s,s===-1?r.length:-1)}function G(){const s=U(e.modelValue);return t.value!==s&&(t.value=s),!0}function Z(){const s=d(e.modelValue)===!0&&G()&&r[t.value];return e.keepAlive===!0?[S(Te,b.value,[S(_.value===!0?n(f.value,()=>({...le,name:f.value})):le,{key:f.value,style:c.value},()=>s)])]:[S("div",{class:"q-panel scroll",style:c.value,key:f.value,role:"tabpanel"},[s])]}function de(){if(r.length!==0)return e.animated===!0?[S(De,{name:h.value},Z)]:Z()}function ge(s){return r=be(z(s.default,[])).filter(m=>m.props!==null&&m.props.slot===void 0&&d(m.props.name)===!0),r.length}function me(){return r}return Object.assign(i,{next:y,previous:P,goTo:E}),{panelIndex:t,panelDirectives:D,updatePanelsList:ge,updatePanelIndex:G,getPanelContent:de,getEnabledPanels:he,getPanels:me,isValidPanelName:d,keepAliveProps:b,needsUniqueKeepAliveWrapper:_,goToPanelByOffset:Q,goToPanel:E,nextPanel:y,previousPanel:P}}var ie=j({name:"QTabPanel",props:ea,setup(e,{slots:a}){return()=>S("div",{class:"q-tab-panel",role:"tabpanel"},z(a.default))}}),ta=j({name:"QTabPanels",props:{...aa,...ke},emits:na,setup(e,{slots:a}){const i=se(),n=xe(e,i.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:t}=oa(),h=v(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(a),ye("div",{class:h.value},o(),"pan",e.swipeable,()=>t.value))}});const la={props:{danhSachKhachHang:{type:Array,required:!0}},emits:["chon-khach-hang","them-khach-hang","sua-khach-hang","xoa-khach-hang"],setup(e,{emit:a}){const i=R(),n=x(""),r=x("T\u1EA5t c\u1EA3"),o=v(()=>i.state.taiTuc.loaiBaoHiemOptions),t=v(()=>{let g=e.danhSachKhachHang;if(n.value){const c=n.value.toLowerCase();g=g.filter(f=>f.hoTen.toLowerCase().includes(c)||f.soDienThoai.includes(c)||f.email.toLowerCase().includes(c))}return r.value!=="T\u1EA5t c\u1EA3"&&(g=g.filter(c=>c.hop_dongs.filter(b=>b.loaiBaoHiem===r.value).length>0)),g});return{searchText:n,filterLoaiBaoHiem:r,loaiBaoHiemOptions:o,danhSachKhachHangLoc:t,chonKhachHang:g=>{a("chon-khach-hang",g)},themKhachHangMoi:()=>{a("them-khach-hang")},suaKhachHang:g=>{a("sua-khach-hang",g)},xoaKhachHang:g=>{a("xoa-khach-hang",g)}}}},ia={class:"row q-col-gutter-sm q-mb-md"},sa={class:"col-6"},ra={class:"col-6"},ua={class:"text-grey-8 q-gutter-xs"},ca={key:0,class:"text-center q-pa-md"};function ha(e,a,i,n,r,o){return k(),M("div",null,[C("div",ia,[C("div",sa,[l(K,{modelValue:n.searchText,"onUpdate:modelValue":a[0]||(a[0]=t=>n.searchText=t),label:"T\xECm ki\u1EBFm",dense:"",outlined:""},null,8,["modelValue"])]),C("div",ra,[l(ze,{modelValue:n.filterLoaiBaoHiem,"onUpdate:modelValue":a[1]||(a[1]=t=>n.filterLoaiBaoHiem=t),options:n.loaiBaoHiemOptions,label:"L\u1ECDc theo lo\u1EA1i b\u1EA3o hi\u1EC3m",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),l(Fe,{bordered:"",separator:""},{default:p(()=>[(k(!0),M(Ke,null,_e(n.danhSachKhachHangLoc,t=>re((k(),A(je,{key:t.id,clickable:""},{default:p(()=>[l(F,{avatar:""},{default:p(()=>[l(Ve,{icon:"person",color:"primary","text-color":"white"})]),_:1}),l(F,null,{default:p(()=>[l(oe,{onClick:h=>n.chonKhachHang(t)},{default:p(()=>[ue(X(t.hoTen),1)]),_:2},1032,["onClick"]),l(oe,{caption:"",lines:"2"},{default:p(()=>[C("div",null,X(t.soDienThoai),1),C("div",null,X(t.email),1)]),_:2},1024)]),_:2},1024),l(F,{side:""},{default:p(()=>[C("div",ua,[l(V,{size:"12px",flat:"",dense:"",round:"",icon:"edit",onClick:$(h=>n.suaKhachHang(t),["stop"])},null,8,["onClick"]),l(V,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:$(h=>n.xoaKhachHang(t.id),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)),[[Pe]])),128)),n.danhSachKhachHangLoc.length?Se("",!0):(k(),M("div",ca," Kh\xF4ng c\xF3 kh\xE1ch h\xE0ng n\xE0o. "))]),_:1})])}var da=Y(la,[["render",ha]]);const ga={props:{khachHang:{type:Object,default:null}},emits:["dong-dialog","luu-thong-tin"],setup(e,{emit:a}){R();const i=x({id:null,hoTen:"",ngaySinh:"",soDienThoai:"",email:"",diaChi:"",maSoBhxh:""});return ce(()=>{e.khachHang&&(i.value={...e.khachHang})}),{form:i,submitForm:()=>{a("luu-thong-tin",i.value)},dongDialog:()=>{a("dong-dialog")}}}};function ma(e,a,i,n,r,o){return k(),A(qe,{style:{"min-width":"350px"}},{default:p(()=>[l(Qe,null,{default:p(()=>a[6]||(a[6]=[C("div",{class:"text-h6"},"Th\xF4ng tin kh\xE1ch h\xE0ng",-1)])),_:1}),l(Ge,{onSubmit:n.submitForm,class:"q-gutter-md"},{default:p(()=>[l(K,{modelValue:n.form.maSoBhxh,"onUpdate:modelValue":a[0]||(a[0]=t=>n.form.maSoBhxh=t),label:"M\xE3 s\u1ED1 BHXH"},null,8,["modelValue"]),l(K,{modelValue:n.form.hoTen,"onUpdate:modelValue":a[1]||(a[1]=t=>n.form.hoTen=t),label:"H\u1ECD v\xE0 t\xEAn","lazy-rules":"",rules:[t=>t&&t.length>0||"Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn"]},null,8,["modelValue","rules"]),l(K,{modelValue:n.form.ngaySinh,"onUpdate:modelValue":a[2]||(a[2]=t=>n.form.ngaySinh=t),label:"Ng\xE0y sinh",type:"date"},null,8,["modelValue"]),l(K,{modelValue:n.form.soDienThoai,"onUpdate:modelValue":a[3]||(a[3]=t=>n.form.soDienThoai=t),label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"},null,8,["modelValue"]),l(K,{modelValue:n.form.email,"onUpdate:modelValue":a[4]||(a[4]=t=>n.form.email=t),label:"Email",type:"email"},null,8,["modelValue"]),l(K,{modelValue:n.form.diaChi,"onUpdate:modelValue":a[5]||(a[5]=t=>n.form.diaChi=t),label:"\u0110\u1ECBa ch\u1EC9",type:"textarea"},null,8,["modelValue"]),l(we,{align:"right",class:"text-primary"},{default:p(()=>[re(l(V,{flat:"",label:"\u0110\xF3ng"},null,512),[[Ye]]),l(V,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var pa=Y(ga,[["render",ma]]);const fa={name:"CustomerContract",components:{CustomerList:da,ContractList:We,CustomerForm:pa,ContractForm:Ae},setup(){const e=R(),a=x("khachHang"),i=x(!1),n=x(!1),r=v(()=>e.state.khachHang.danhSachKhachHang),o=v(()=>e.state.khachHang.khachHangDangChon),t=v(()=>o.value?e.state.khachHang.khachHangDangChon.hop_dongs:[]),h=v(()=>e.state.hopDong.hopDongDangChon);ce(()=>{e.dispatch("khachHang/layDanhSachKhachHang"),e.dispatch("hopDong/layDanhSachHopDong")});const H=d=>{e.dispatch("khachHang/chonKhachHang",d),a.value="hopDong"},D=()=>{e.dispatch("khachHang/chonKhachHang",null),i.value=!0},u=d=>{e.dispatch("khachHang/chonKhachHang",d),i.value=!0},g=d=>{e.dispatch("khachHang/xoaKhachHang",d)},c=()=>{i.value=!1},f=d=>{d.id?e.dispatch("khachHang/suaKhachHang",d):e.dispatch("khachHang/themKhachHang",d),c()},b=()=>{e.dispatch("hopDong/chonHopDong",null),n.value=!0},_=d=>{e.dispatch("hopDong/chonHopDong",d),n.value=!0},y=d=>{e.dispatch("hopDong/xoaHopDong",d)},P=()=>{n.value=!1};return{tab:a,dialogKhachHangMo:i,dialogHopDongMo:n,danhSachKhachHang:r,khachHangDangChon:o,danhSachHopDongTheoKhachHang:t,hopDongDangChon:h,chonKhachHang:H,themKhachHangMoi:D,suaKhachHang:u,xoaKhachHang:g,dongDialogKhachHang:c,luuThongTinKhachHang:f,themHopDongMoi:b,suaHopDong:_,xoaHopDong:y,dongDialogHopDong:P,luuThongTinHopDong:d=>{d.id?e.dispatch("hopDong/suaHopDong",d):e.dispatch("hopDong/themHopDong",d),P()}}}},va={class:"row q-col-gutter-md"},Ha={class:"col-12"},Da={class:"col-12"},ba={key:1,class:"text-center q-pa-md"};function Ca(e,a,i,n,r,o){const t=B("customer-list"),h=B("contract-list"),H=B("customer-form"),D=B("contract-form");return k(),A(Re,{class:"q-pa-md"},{default:p(()=>[C("div",va,[C("div",Ha,[l(Me,null,{default:p(()=>[l(V,{flat:"",round:"",dense:"",icon:"menu"}),l(Be,null,{default:p(()=>a[4]||(a[4]=[ue("Qu\u1EA3n l\xFD Kh\xE1ch h\xE0ng & H\u1EE3p \u0111\u1ED3ng")])),_:1}),l(Ee),l(V,{label:"Th\xEAm kh\xE1ch h\xE0ng m\u1EDBi",color:"primary",onClick:n.themKhachHangMoi},null,8,["onClick"])]),_:1})]),C("div",Da,[l(Oe,{modelValue:n.tab,"onUpdate:modelValue":a[0]||(a[0]=u=>n.tab=u),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:p(()=>[l(te,{name:"khachHang",label:"Kh\xE1ch h\xE0ng"}),l(te,{name:"hopDong",label:"H\u1EE3p \u0111\u1ED3ng"})]),_:1},8,["modelValue"]),l(Le),l(ta,{modelValue:n.tab,"onUpdate:modelValue":a[1]||(a[1]=u=>n.tab=u),animated:""},{default:p(()=>[l(ie,{name:"khachHang"},{default:p(()=>[l(t,{"danh-sach-khach-hang":n.danhSachKhachHang,onChonKhachHang:n.chonKhachHang,onThemKhachHang:n.themKhachHangMoi,onSuaKhachHang:n.suaKhachHang,onXoaKhachHang:n.xoaKhachHang},null,8,["danh-sach-khach-hang","onChonKhachHang","onThemKhachHang","onSuaKhachHang","onXoaKhachHang"])]),_:1}),l(ie,{name:"hopDong"},{default:p(()=>[n.khachHangDangChon?(k(),A(h,{key:0,"khach-hang-id":n.khachHangDangChon.id,"danh-sach-hop-dong":n.danhSachHopDongTheoKhachHang,onThemHopDong:n.themHopDongMoi,onSuaHopDong:n.suaHopDong,onXoaHopDong:n.xoaHopDong},null,8,["khach-hang-id","danh-sach-hop-dong","onThemHopDong","onSuaHopDong","onXoaHopDong"])):(k(),M("div",ba," Ch\u1ECDn m\u1ED9t kh\xE1ch h\xE0ng \u0111\u1EC3 xem danh s\xE1ch h\u1EE3p \u0111\u1ED3ng. "))]),_:1})]),_:1},8,["modelValue"])])]),l(ee,{modelValue:n.dialogKhachHangMo,"onUpdate:modelValue":a[2]||(a[2]=u=>n.dialogKhachHangMo=u),persistent:""},{default:p(()=>[l(H,{"khach-hang":n.khachHangDangChon,onDongDialog:n.dongDialogKhachHang,onLuuThongTin:n.luuThongTinKhachHang},null,8,["khach-hang","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n.dialogHopDongMo,"onUpdate:modelValue":a[3]||(a[3]=u=>n.dialogHopDongMo=u),persistent:""},{default:p(()=>[l(D,{"hop-dong":n.hopDongDangChon,"khach-hang-id":n.khachHangDangChon?n.khachHangDangChon.id:null,onDongDialog:n.dongDialogHopDong,onLuuThongTin:n.luuThongTinHopDong},null,8,["hop-dong","khach-hang-id","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"])]),_:1})}var Qa=Y(fa,[["render",Ca]]);export{Qa as default};
