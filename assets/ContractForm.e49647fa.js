import{c as v,b as T,aZ as V,r as H,a as C,D as k,w as S,Y as y,Z as p,_ as h,$ as u,al as Q,a7 as I,an as K,ao as m,a5 as w,a_ as N,F as O,a0 as b,am as x}from"./index.135f142b.js";import{a as f,C as F}from"./ClosePopup.ff2b5c7a.js";import{Q as P}from"./QForm.9f535290.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";var Y=v({name:"QSpace",setup(){const o=T("div",{class:"q-space"});return()=>o}});const U={name:"ContractForm",props:{hopDong:{type:Object,default:null},khachHangId:{type:Number,required:!0},mode:{type:String,default:""}},emits:["dong-dialog","luu-thong-tin"],setup(o,{emit:n}){const i=V(),a=H({id:null,khachHangId:o.khachHangId,loaiBaoHiem:null,tenGoiBaoHiem:"",ngayBatDau:"",ngayKetThuc:"",mucPhi:null,phuongThucDong:null}),s=C(()=>i.state.taiTuc.loaiBaoHiemOptions),r=[{label:"1 th\xE1ng",value:1},{label:"3 th\xE1ng",value:3},{label:"6 th\xE1ng",value:6},{label:"12 th\xE1ng",value:12},{label:"24 th\xE1ng",value:24},{label:"36 th\xE1ng",value:36},{label:"48 th\xE1ng",value:48},{label:"60 th\xE1ng",value:60}];k(()=>{if(o.hopDong)a.value={...o.hopDong};else if(o.mode==="gia-han"){const l=i.state.taiTuc.khachHangDangChon,t=i.getters["hopDong/getHopDongById"](l.hopDongId);a.value.khachHangId=o.khachHangId,a.value.ngayBatDau=e(t.ngayKetThuc),a.value.loaiBaoHiem=t.loaiBaoHiem,a.value.tenGoiBaoHiem=t.tenGoiBaoHiem,a.value.mucPhi=t.mucPhi}}),S([()=>a.value.phuongThucDong,()=>a.value.ngayBatDau,()=>{var l;return(l=o.hopDong)==null?void 0:l.ngayKetThuc}],()=>{var l;o.mode==="gia-han"&&a.value.phuongThucDong&&a.value.ngayBatDau&&(a.value.ngayKetThuc=d(a.value.ngayBatDau,(l=o.hopDong)==null?void 0:l.ngayKetThuc,a.value.phuongThucDong))});const e=l=>{const t=new Date(l);return t.setDate(t.getDate()+1),t.toISOString().slice(0,10)},d=(l,t,B)=>{const c=new Date(t),D=new Date;let g=c;return c<=D&&(g=D),g.setMonth(g.getMonth()+B),g.setDate(g.getDate()-1),g.toISOString().slice(0,10)};return{form:a,loaiBaoHiemOptions:s,phuongThucDongOptions:r,submitForm:()=>{n("luu-thong-tin",a.value)},dongDialog:()=>{n("dong-dialog")},ngayTiepTheo:e,tinhNgayKetThuc:d}}},M={class:"text-h6"};function _(o,n,i,a,s,r){return y(),p(x,{style:{"min-width":"350px"}},{default:h(()=>[u(K,null,{default:h(()=>[Q("div",M,I(i.mode==="gia-han"?"Gia h\u1EA1n h\u1EE3p \u0111\u1ED3ng":i.hopDong?"Ch\u1EC9nh s\u1EEDa h\u1EE3p \u0111\u1ED3ng":"Th\xEAm h\u1EE3p \u0111\u1ED3ng m\u1EDBi"),1)]),_:1}),u(P,{onSubmit:a.submitForm,class:"q-gutter-md"},{default:h(()=>[u(f,{modelValue:a.form.loaiBaoHiem,"onUpdate:modelValue":n[0]||(n[0]=e=>a.form.loaiBaoHiem=e),options:a.loaiBaoHiemOptions,label:"Lo\u1EA1i b\u1EA3o hi\u1EC3m","emit-value":"","map-options":"",disable:i.mode==="gia-han","lazy-rules":"",rules:[e=>e&&e.length>0||"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\u1EA3o hi\u1EC3m"]},null,8,["modelValue","options","disable","rules"]),u(m,{modelValue:a.form.tenGoiBaoHiem,"onUpdate:modelValue":n[1]||(n[1]=e=>a.form.tenGoiBaoHiem=e),label:"T\xEAn g\xF3i b\u1EA3o hi\u1EC3m","lazy-rules":"",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp t\xEAn g\xF3i"]},null,8,["modelValue","rules"]),u(m,{modelValue:a.form.ngayBatDau,"onUpdate:modelValue":n[2]||(n[2]=e=>a.form.ngayBatDau=e),label:"Ng\xE0y b\u1EAFt \u0111\u1EA7u",type:"date",disable:i.mode==="gia-han"},null,8,["modelValue","disable"]),u(m,{modelValue:a.form.ngayKetThuc,"onUpdate:modelValue":n[3]||(n[3]=e=>a.form.ngayKetThuc=e),label:"Ng\xE0y k\u1EBFt th\xFAc",type:"date",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp ng\xE0y k\u1EBFt th\xFAc",e=>e>a.form.ngayBatDau||"Ng\xE0y k\u1EBFt th\xFAc ph\u1EA3i sau ng\xE0y b\u1EAFt \u0111\u1EA7u"]},null,8,["modelValue","rules"]),u(m,{modelValue:a.form.mucPhi,"onUpdate:modelValue":n[4]||(n[4]=e=>a.form.mucPhi=e),label:"M\u1EE9c ph\xED",type:"number"},null,8,["modelValue"]),i.mode==="gia-han"?(y(),p(f,{key:0,modelValue:a.form.phuongThucDong,"onUpdate:modelValue":n[5]||(n[5]=e=>a.form.phuongThucDong=e),options:a.phuongThucDongOptions,label:"Ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e!==null||"Vui l\xF2ng ch\u1ECDn ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng"]},null,8,["modelValue","options","rules"])):w("",!0),u(N,{align:"right",class:"text-primary"},{default:h(()=>[O(u(b,{flat:"",label:"\u0110\xF3ng",onClick:a.dongDialog},null,8,["onClick"]),[[F]]),u(b,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var E=G(U,[["render",_]]);export{E as C,Y as Q};
