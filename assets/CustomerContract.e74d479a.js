import{C as ge,Q as pe}from"./ContractForm.cf9054fe.js";import{c as j,d as fe,f as w,n as ve,j as He,k as L,p as I,q as J,u as N,t as O,r as K,a as v,w as _e,g as se,E as De,b as V,ao as be,ap as Ce,H as z,aq as xe,x as ke,z as ye,G as Te,_ as R,Y,a1 as T,a7 as A,al as C,a2 as l,ar as y,$ as p,a9 as Ke,a8 as Ve,a6 as Se,F as re,Z as B,as as Pe,a4 as we,a5 as F,a3 as Q,at as $,ab as Qe,D as ue,am as qe,au as Le,an as Me,a0 as M,av as Ae,aw as ee}from"./index.b6fdf090.js";import{c as Be,Q as Ue}from"./rtl.4627cc1b.js";import{u as Ee,a as Ie,b as Ne,g as ae,s as ne,c as Oe}from"./QTabs.16612798.js";import{Q as Fe}from"./QPage.429196e4.js";import{Q as Xe,C as je}from"./ThuTienForm.27f90a39.js";import{Q as ze,b as Re,c as X,a as oe}from"./QList.5e5bc38e.js";import{C as Ye}from"./ContractList.2bf7f211.js";import{Q as We}from"./QForm.58d5cd1d.js";var te=j({name:"QTab",props:Ee,emits:Ie,setup(e,{slots:a,emit:i}){const{renderTab:n}=Ne(e,a,i);return()=>n("div")}});function Ge(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,n)=>{const r=parseFloat(i);r&&(a[n]=r)}),a}var Ze=fe({name:"touch-swipe",beforeMount(e,{value:a,arg:i,modifiers:n}){if(n.mouse!==!0&&w.has.touch!==!0)return;const r=n.mouseCapture===!0?"Capture":"",o={handler:a,sensitivity:Ge(i),direction:ae(n),noop:ve,mouseStart(t){ne(t,o)&&He(t)&&(L(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(t,!0))},touchStart(t){if(ne(t,o)){const c=t.target;L(o,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","notPassiveCapture"],[c,"touchend","end","notPassiveCapture"]]),o.start(t)}},start(t,c){w.is.firefox===!0&&I(e,!0);const _=J(t);o.event={x:_.left,y:_.top,time:Date.now(),mouse:c===!0,dir:!1}},move(t){if(o.event===void 0)return;if(o.event.dir!==!1){N(t);return}const c=Date.now()-o.event.time;if(c===0)return;const _=J(t),D=_.left-o.event.x,u=Math.abs(D),m=_.top-o.event.y,h=Math.abs(m);if(o.event.mouse!==!0){if(u<o.sensitivity[1]&&h<o.sensitivity[1]){o.end(t);return}}else if(window.getSelection().toString()!==""){o.end(t);return}else if(u<o.sensitivity[2]&&h<o.sensitivity[2])return;const f=u/c,H=h/c;o.direction.vertical===!0&&u<h&&u<100&&H>o.sensitivity[0]&&(o.event.dir=m<0?"up":"down"),o.direction.horizontal===!0&&u>h&&h<100&&f>o.sensitivity[0]&&(o.event.dir=D<0?"left":"right"),o.direction.up===!0&&u<h&&m<0&&u<100&&H>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&u<h&&m>0&&u<100&&H>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&u>h&&D<0&&h<100&&f>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&u>h&&D>0&&h<100&&f>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(N(t),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Be(),o.styleCleanup=x=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const b=()=>{document.body.classList.remove("no-pointer-events--children")};x===!0?setTimeout(b,50):b()}),o.handler({evt:t,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:c,distance:{x:u,y:h}})):o.end(t)},end(t){o.event!==void 0&&(O(o,"temp"),w.is.firefox===!0&&I(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),t!==void 0&&o.event.dir!==!1&&N(t),o.event=void 0)}};if(e.__qtouchswipe=o,n.mouse===!0){const t=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}w.has.touch===!0&&L(o,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const i=e.__qtouchswipe;i!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&i.end(),i.handler=a.value),i.direction=ae(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(O(a,"main"),O(a,"temp"),w.is.firefox===!0&&I(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function Je(){let e=Object.create(null);return{getCache:(a,i)=>e[a]===void 0?e[a]=typeof i=="function"?i():i:e[a],setCache(a,i){e[a]=i},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const $e={name:{required:!0},disable:Boolean},le={setup(e,{slots:a}){return()=>V("div",{class:"q-panel scroll",role:"tabpanel"},z(a.default))}},ea={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},aa=["update:modelValue","beforeTransition","transition"];function na(){const{props:e,emit:a,proxy:i}=se(),{getCache:n}=Je();let r,o;const t=K(null),c=K(null);function _(s){const g=e.vertical===!0?"up":"left";P((i.$q.lang.rtl===!0?-1:1)*(s.direction===g?1:-1))}const D=v(()=>[[Ze,_,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),u=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),m=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),h=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),H=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),x=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);_e(()=>e.modelValue,(s,g)=>{const k=d(s)===!0?E(s):-1;o!==!0&&W(k===-1?0:k<E(g)?-1:1),t.value!==k&&(t.value=k,a("beforeTransition",s,g),De(()=>{a("transition",s,g)}))});function b(){P(1)}function S(){P(-1)}function U(s){a("update:modelValue",s)}function d(s){return s!=null&&s!==""}function E(s){return r.findIndex(g=>g.props.name===s&&g.props.disable!==""&&g.props.disable!==!0)}function he(){return r.filter(s=>s.props.disable!==""&&s.props.disable!==!0)}function W(s){const g=s!==0&&e.animated===!0&&t.value!==-1?"q-transition--"+(s===-1?u.value:m.value):null;c.value!==g&&(c.value=g)}function P(s,g=t.value){let k=g+s;for(;k!==-1&&k<r.length;){const q=r[k];if(q!==void 0&&q.props.disable!==""&&q.props.disable!==!0){W(s),o=!0,a("update:modelValue",q.props.name),setTimeout(()=>{o=!1});return}k+=s}e.infinite===!0&&r.length!==0&&g!==-1&&g!==r.length&&P(s,s===-1?r.length:-1)}function G(){const s=E(e.modelValue);return t.value!==s&&(t.value=s),!0}function Z(){const s=d(e.modelValue)===!0&&G()&&r[t.value];return e.keepAlive===!0?[V(xe,H.value,[V(x.value===!0?n(f.value,()=>({...le,name:f.value})):le,{key:f.value,style:h.value},()=>s)])]:[V("div",{class:"q-panel scroll",style:h.value,key:f.value,role:"tabpanel"},[s])]}function ce(){if(r.length!==0)return e.animated===!0?[V(be,{name:c.value},Z)]:Z()}function de(s){return r=Ce(z(s.default,[])).filter(g=>g.props!==null&&g.props.slot===void 0&&d(g.props.name)===!0),r.length}function me(){return r}return Object.assign(i,{next:b,previous:S,goTo:U}),{panelIndex:t,panelDirectives:D,updatePanelsList:de,updatePanelIndex:G,getPanelContent:ce,getEnabledPanels:he,getPanels:me,isValidPanelName:d,keepAliveProps:H,needsUniqueKeepAliveWrapper:x,goToPanelByOffset:P,goToPanel:U,nextPanel:b,previousPanel:S}}var ie=j({name:"QTabPanel",props:$e,setup(e,{slots:a}){return()=>V("div",{class:"q-tab-panel",role:"tabpanel"},z(a.default))}}),oa=j({name:"QTabPanels",props:{...ea,...ke},emits:aa,setup(e,{slots:a}){const i=se(),n=ye(e,i.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:t}=na(),c=v(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(a),Te("div",{class:c.value},o(),"pan",e.swipeable,()=>t.value))}});const ta={props:{danhSachKhachHang:{type:Array,required:!0}},emits:["chon-khach-hang","them-khach-hang","sua-khach-hang","xoa-khach-hang"],setup(e,{emit:a}){const i=Y(),n=K(""),r=K(1),o=v(()=>i.state.taiTuc.loaiBaoHiemOptions),t=v(()=>{let m=e.danhSachKhachHang;if(n.value){const h=n.value.toLowerCase();m=m.filter(f=>{var H,x,b;return f.ho_ten.toLowerCase().includes(h)||((H=f.so_dien_thoai)==null?void 0:H.includes(h))||((x=f.so_dien_thoai2)==null?void 0:x.includes(h))||((b=f.email)==null?void 0:b.toLowerCase().includes(h))})}return r.value!==1&&(m=m.filter(h=>h.hop_dong_bao_hiem.filter(H=>H.loai_bao_hiem_id==r.value).length>0)),m});return{searchText:n,filterLoaiBaoHiem:r,loaiBaoHiemOptions:o,danhSachKhachHangLoc:t,chonKhachHang:m=>{a("chon-khach-hang",m)},themKhachHangMoi:()=>{a("them-khach-hang")},suaKhachHang:m=>{a("sua-khach-hang",m)},xoaKhachHang:m=>{a("xoa-khach-hang",m)}}}},la={class:"row q-col-gutter-sm q-mb-md"},ia={class:"col-6"},sa={class:"col-6"},ra={class:"text-grey-8 q-gutter-xs"},ua={key:0,class:"text-center q-pa-md"};function ha(e,a,i,n,r,o){return T(),A("div",null,[C("div",la,[C("div",ia,[l(y,{modelValue:n.searchText,"onUpdate:modelValue":a[0]||(a[0]=t=>n.searchText=t),label:"T\xECm ki\u1EBFm",dense:"",outlined:""},null,8,["modelValue"])]),C("div",sa,[l(Xe,{modelValue:n.filterLoaiBaoHiem,"onUpdate:modelValue":a[1]||(a[1]=t=>n.filterLoaiBaoHiem=t),options:n.loaiBaoHiemOptions,label:"L\u1ECDc theo lo\u1EA1i b\u1EA3o hi\u1EC3m",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),l(ze,{bordered:"",separator:""},{default:p(()=>[(T(!0),A(Ke,null,Ve(n.danhSachKhachHangLoc,t=>re((T(),B(Re,{key:t.id,clickable:""},{default:p(()=>[l(X,{avatar:""},{default:p(()=>[l(Pe,{icon:"person",color:"primary","text-color":"white"})]),_:1}),l(X,null,{default:p(()=>[l(oe,{onClick:c=>n.chonKhachHang(t)},{default:p(()=>[we(F(t.ho_ten),1)]),_:2},1032,["onClick"]),l(oe,{caption:"",lines:"2"},{default:p(()=>[C("div",null,F(t.so_dien_thoai2||t.so_dien_thoai),1),C("div",null,F(t.email),1)]),_:2},1024)]),_:2},1024),l(X,{side:""},{default:p(()=>[C("div",ra,[l(Q,{size:"12px",flat:"",dense:"",round:"",icon:"edit",onClick:$(c=>n.suaKhachHang(t),["stop"])},null,8,["onClick"]),l(Q,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:$(c=>n.xoaKhachHang(t.id),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)),[[Qe]])),128)),n.danhSachKhachHangLoc.length?Se("",!0):(T(),A("div",ua," Kh\xF4ng c\xF3 kh\xE1ch h\xE0ng n\xE0o. "))]),_:1})])}var ca=R(ta,[["render",ha]]);const da={props:{khachHang:{type:Object,default:null}},emits:["dong-dialog","luu-thong-tin"],setup(e,{emit:a}){Y();const i=K({id:null,ho_ten:"",ngay_sinh:"",so_dien_thoai:"",so_dien_thoai2:"",email:"",dia_chi:"",ma_so_bhxh:""});return ue(()=>{e.khachHang&&(i.value={...e.khachHang})}),{form:i,submitForm:()=>{a("luu-thong-tin",i.value)},dongDialog:()=>{a("dong-dialog")}}}};function ma(e,a,i,n,r,o){return T(),B(Me,{style:{"min-width":"350px"}},{default:p(()=>[l(qe,null,{default:p(()=>a[7]||(a[7]=[C("div",{class:"text-h6"},"Th\xF4ng tin kh\xE1ch h\xE0ng",-1)])),_:1}),l(We,{onSubmit:n.submitForm,class:"q-gutter-md"},{default:p(()=>[l(y,{modelValue:n.form.ma_so_bhxh,"onUpdate:modelValue":a[0]||(a[0]=t=>n.form.ma_so_bhxh=t),label:"M\xE3 s\u1ED1 BHXH"},null,8,["modelValue"]),l(y,{modelValue:n.form.ho_ten,"onUpdate:modelValue":a[1]||(a[1]=t=>n.form.ho_ten=t),label:"H\u1ECD v\xE0 t\xEAn","lazy-rules":"",rules:[t=>t&&t.length>0||"Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn"]},null,8,["modelValue","rules"]),l(y,{modelValue:n.form.ngay_sinh,"onUpdate:modelValue":a[2]||(a[2]=t=>n.form.ngay_sinh=t),label:"Ng\xE0y sinh",type:"date"},null,8,["modelValue"]),l(y,{disable:"",modelValue:n.form.so_dien_thoai,"onUpdate:modelValue":a[3]||(a[3]=t=>n.form.so_dien_thoai=t),label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (\u0111\u0103ng k\xFD)"},null,8,["modelValue"]),l(y,{modelValue:n.form.so_dien_thoai2,"onUpdate:modelValue":a[4]||(a[4]=t=>n.form.so_dien_thoai2=t),label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i (li\xEAn h\u1EC7)"},null,8,["modelValue"]),l(y,{modelValue:n.form.email,"onUpdate:modelValue":a[5]||(a[5]=t=>n.form.email=t),label:"Email",type:"email"},null,8,["modelValue"]),l(y,{modelValue:n.form.dia_chi,"onUpdate:modelValue":a[6]||(a[6]=t=>n.form.dia_chi=t),label:"\u0110\u1ECBa ch\u1EC9",type:"textarea"},null,8,["modelValue"]),l(Le,{align:"right",class:"text-primary"},{default:p(()=>[re(l(Q,{flat:"",label:"\u0110\xF3ng"},null,512),[[je]]),l(Q,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var ga=R(da,[["render",ma]]);const pa={name:"CustomerContract",components:{CustomerList:ca,ContractList:Ye,CustomerForm:ga,ContractForm:ge},setup(){const e=Y(),a=K("khachHang"),i=K(!1),n=K(!1),r=v(()=>e.state.khachHang.danhSachKhachHang),o=v(()=>e.state.khachHang.khachHangDangChon),t=v(()=>o.value?e.getters["hopDong/danhSachHopDongTheoKhachHangId"](o.value.id):[]),c=v(()=>e.state.hopDong.hopDongDangChon);ue(()=>{e.dispatch("khachHang/layDanhSachKhachHang"),e.dispatch("hopDong/layDanhSachHopDong")});const _=d=>{e.dispatch("khachHang/chonKhachHang",d),a.value="hopDong"},D=()=>{e.dispatch("khachHang/chonKhachHang",null),i.value=!0},u=d=>{e.dispatch("khachHang/chonKhachHang",d),i.value=!0},m=d=>{e.dispatch("khachHang/xoaKhachHang",d)},h=()=>{i.value=!1},f=d=>{d.id?e.dispatch("khachHang/suaKhachHang",d):e.dispatch("khachHang/themKhachHang",d),h()},H=()=>{e.dispatch("hopDong/chonHopDong",null),n.value=!0},x=d=>{e.dispatch("hopDong/chonHopDong",d),n.value=!0},b=d=>{e.dispatch("hopDong/xoaHopDong",d)},S=()=>{n.value=!1};return{tab:a,dialogKhachHangMo:i,dialogHopDongMo:n,danhSachKhachHang:r,khachHangDangChon:o,danhSachHopDongTheoKhachHang:t,hopDongDangChon:c,chonKhachHang:_,themKhachHangMoi:D,suaKhachHang:u,xoaKhachHang:m,dongDialogKhachHang:h,luuThongTinKhachHang:f,themHopDongMoi:H,suaHopDong:x,xoaHopDong:b,dongDialogHopDong:S,luuThongTinHopDong:d=>{d.id?e.dispatch("hopDong/suaHopDong",d):e.dispatch("hopDong/themHopDong",d),S()}}}},fa={class:"row q-col-gutter-md"},va={class:"col-12"},Ha={class:"col-12"},_a={key:1,class:"text-center q-pa-md"};function Da(e,a,i,n,r,o){const t=M("customer-list"),c=M("contract-list"),_=M("customer-form"),D=M("contract-form");return T(),B(Fe,{class:"q-pa-md"},{default:p(()=>[C("div",fa,[C("div",va,[l(Ue,null,{default:p(()=>[l(pe),l(Q,{label:"Th\xEAm kh\xE1ch h\xE0ng m\u1EDBi",color:"primary",onClick:n.themKhachHangMoi},null,8,["onClick"])]),_:1})]),C("div",Ha,[l(Oe,{modelValue:n.tab,"onUpdate:modelValue":a[0]||(a[0]=u=>n.tab=u),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:p(()=>[l(te,{name:"khachHang",label:"Kh\xE1ch h\xE0ng"}),l(te,{name:"hopDong",label:"H\u1EE3p \u0111\u1ED3ng"})]),_:1},8,["modelValue"]),l(Ae),l(oa,{modelValue:n.tab,"onUpdate:modelValue":a[1]||(a[1]=u=>n.tab=u),animated:""},{default:p(()=>[l(ie,{name:"khachHang"},{default:p(()=>[l(t,{"danh-sach-khach-hang":n.danhSachKhachHang,onChonKhachHang:n.chonKhachHang,onThemKhachHang:n.themKhachHangMoi,onSuaKhachHang:n.suaKhachHang,onXoaKhachHang:n.xoaKhachHang},null,8,["danh-sach-khach-hang","onChonKhachHang","onThemKhachHang","onSuaKhachHang","onXoaKhachHang"])]),_:1}),l(ie,{name:"hopDong"},{default:p(()=>[n.khachHangDangChon?(T(),B(c,{key:0,"khach-hang-id":n.khachHangDangChon.id,"danh-sach-hop-dong":n.danhSachHopDongTheoKhachHang,onThemHopDong:n.themHopDongMoi,onSuaHopDong:n.suaHopDong,onXoaHopDong:n.xoaHopDong},null,8,["khach-hang-id","danh-sach-hop-dong","onThemHopDong","onSuaHopDong","onXoaHopDong"])):(T(),A("div",_a," Ch\u1ECDn m\u1ED9t kh\xE1ch h\xE0ng \u0111\u1EC3 xem danh s\xE1ch h\u1EE3p \u0111\u1ED3ng. "))]),_:1})]),_:1},8,["modelValue"])])]),l(ee,{modelValue:n.dialogKhachHangMo,"onUpdate:modelValue":a[2]||(a[2]=u=>n.dialogKhachHangMo=u),persistent:""},{default:p(()=>[l(_,{"khach-hang":n.khachHangDangChon,onDongDialog:n.dongDialogKhachHang,onLuuThongTin:n.luuThongTinKhachHang},null,8,["khach-hang","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n.dialogHopDongMo,"onUpdate:modelValue":a[3]||(a[3]=u=>n.dialogHopDongMo=u),persistent:""},{default:p(()=>[l(D,{hopDong:n.hopDongDangChon,khachHangId:n.khachHangDangChon?n.khachHangDangChon.id:null,onDongDialog:n.dongDialogHopDong,onLuuThongTin:n.luuThongTinHopDong},null,8,["hopDong","khachHangId","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"])]),_:1})}var Pa=R(pa,[["render",Da]]);export{Pa as default};
