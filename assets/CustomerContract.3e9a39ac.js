import{C as me,Q as pe}from"./ContractForm.0405a7f1.js";import{c as j,d as fe,f as w,n as ve,j as He,k as L,p as N,q as J,u as I,t as O,r as x,a as v,w as De,g as se,E as be,b as S,ao as Ce,ap as ke,H as z,aq as Te,x as xe,z as ye,G as Ke,_ as R,Y,a1 as T,a7 as M,al as C,a2 as l,ar as K,$ as p,a9 as _e,a8 as Se,a6 as Ve,F as re,Z as A,as as Pe,a4 as we,a5 as F,a3 as Q,at as $,ab as Qe,D as ue,am as qe,au as Le,an as Be,a0 as B,av as Me,aw as ee}from"./index.da6b8406.js";import{c as Ae,Q as Ee}from"./rtl.98e4608a.js";import{u as Ue,a as Ne,b as Ie,g as ae,s as ne,c as Oe}from"./QTabs.bf2dca43.js";import{Q as Fe}from"./QPage.04ad4391.js";import{Q as Xe,C as je}from"./ThuTienForm.ca5a6ec1.js";import{Q as ze,b as Re,c as X,a as oe}from"./QList.0893b1ff.js";import{C as Ye}from"./ContractList.c42ba439.js";import{Q as We}from"./QForm.295a9825.js";var te=j({name:"QTab",props:Ue,emits:Ne,setup(e,{slots:a,emit:i}){const{renderTab:n}=Ie(e,a,i);return()=>n("div")}});function Ge(e){const a=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((i,n)=>{const r=parseFloat(i);r&&(a[n]=r)}),a}var Ze=fe({name:"touch-swipe",beforeMount(e,{value:a,arg:i,modifiers:n}){if(n.mouse!==!0&&w.has.touch!==!0)return;const r=n.mouseCapture===!0?"Capture":"",o={handler:a,sensitivity:Ge(i),direction:ae(n),noop:ve,mouseStart(t){ne(t,o)&&He(t)&&(L(o,"temp",[[document,"mousemove","move",`notPassive${r}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(t,!0))},touchStart(t){if(ne(t,o)){const h=t.target;L(o,"temp",[[h,"touchmove","move","notPassiveCapture"],[h,"touchcancel","end","notPassiveCapture"],[h,"touchend","end","notPassiveCapture"]]),o.start(t)}},start(t,h){w.is.firefox===!0&&N(e,!0);const H=J(t);o.event={x:H.left,y:H.top,time:Date.now(),mouse:h===!0,dir:!1}},move(t){if(o.event===void 0)return;if(o.event.dir!==!1){I(t);return}const h=Date.now()-o.event.time;if(h===0)return;const H=J(t),D=H.left-o.event.x,u=Math.abs(D),g=H.top-o.event.y,c=Math.abs(g);if(o.event.mouse!==!0){if(u<o.sensitivity[1]&&c<o.sensitivity[1]){o.end(t);return}}else if(window.getSelection().toString()!==""){o.end(t);return}else if(u<o.sensitivity[2]&&c<o.sensitivity[2])return;const f=u/h,b=c/h;o.direction.vertical===!0&&u<c&&u<100&&b>o.sensitivity[0]&&(o.event.dir=g<0?"up":"down"),o.direction.horizontal===!0&&u>c&&c<100&&f>o.sensitivity[0]&&(o.event.dir=D<0?"left":"right"),o.direction.up===!0&&u<c&&g<0&&u<100&&b>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&u<c&&g>0&&u<100&&b>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&u>c&&D<0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&u>c&&D>0&&c<100&&f>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(I(t),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ae(),o.styleCleanup=_=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const y=()=>{document.body.classList.remove("no-pointer-events--children")};_===!0?setTimeout(y,50):y()}),o.handler({evt:t,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:h,distance:{x:u,y:c}})):o.end(t)},end(t){o.event!==void 0&&(O(o,"temp"),w.is.firefox===!0&&N(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),t!==void 0&&o.event.dir!==!1&&I(t),o.event=void 0)}};if(e.__qtouchswipe=o,n.mouse===!0){const t=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}w.has.touch===!0&&L(o,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const i=e.__qtouchswipe;i!==void 0&&(a.oldValue!==a.value&&(typeof a.value!="function"&&i.end(),i.handler=a.value),i.direction=ae(a.modifiers))},beforeUnmount(e){const a=e.__qtouchswipe;a!==void 0&&(O(a,"main"),O(a,"temp"),w.is.firefox===!0&&N(e,!1),a.styleCleanup!==void 0&&a.styleCleanup(),delete e.__qtouchswipe)}});function Je(){let e=Object.create(null);return{getCache:(a,i)=>e[a]===void 0?e[a]=typeof i=="function"?i():i:e[a],setCache(a,i){e[a]=i},hasCache(a){return Object.hasOwnProperty.call(e,a)},clearCache(a){a!==void 0?delete e[a]:e=Object.create(null)}}}const $e={name:{required:!0},disable:Boolean},le={setup(e,{slots:a}){return()=>S("div",{class:"q-panel scroll",role:"tabpanel"},z(a.default))}},ea={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},aa=["update:modelValue","beforeTransition","transition"];function na(){const{props:e,emit:a,proxy:i}=se(),{getCache:n}=Je();let r,o;const t=x(null),h=x(null);function H(s){const m=e.vertical===!0?"up":"left";P((i.$q.lang.rtl===!0?-1:1)*(s.direction===m?1:-1))}const D=v(()=>[[Ze,H,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),u=v(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),g=v(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),c=v(()=>`--q-transition-duration: ${e.transitionDuration}ms`),f=v(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),b=v(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),_=v(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);De(()=>e.modelValue,(s,m)=>{const k=d(s)===!0?U(s):-1;o!==!0&&W(k===-1?0:k<U(m)?-1:1),t.value!==k&&(t.value=k,a("beforeTransition",s,m),be(()=>{a("transition",s,m)}))});function y(){P(1)}function V(){P(-1)}function E(s){a("update:modelValue",s)}function d(s){return s!=null&&s!==""}function U(s){return r.findIndex(m=>m.props.name===s&&m.props.disable!==""&&m.props.disable!==!0)}function ce(){return r.filter(s=>s.props.disable!==""&&s.props.disable!==!0)}function W(s){const m=s!==0&&e.animated===!0&&t.value!==-1?"q-transition--"+(s===-1?u.value:g.value):null;h.value!==m&&(h.value=m)}function P(s,m=t.value){let k=m+s;for(;k!==-1&&k<r.length;){const q=r[k];if(q!==void 0&&q.props.disable!==""&&q.props.disable!==!0){W(s),o=!0,a("update:modelValue",q.props.name),setTimeout(()=>{o=!1});return}k+=s}e.infinite===!0&&r.length!==0&&m!==-1&&m!==r.length&&P(s,s===-1?r.length:-1)}function G(){const s=U(e.modelValue);return t.value!==s&&(t.value=s),!0}function Z(){const s=d(e.modelValue)===!0&&G()&&r[t.value];return e.keepAlive===!0?[S(Te,b.value,[S(_.value===!0?n(f.value,()=>({...le,name:f.value})):le,{key:f.value,style:c.value},()=>s)])]:[S("div",{class:"q-panel scroll",style:c.value,key:f.value,role:"tabpanel"},[s])]}function he(){if(r.length!==0)return e.animated===!0?[S(Ce,{name:h.value},Z)]:Z()}function de(s){return r=ke(z(s.default,[])).filter(m=>m.props!==null&&m.props.slot===void 0&&d(m.props.name)===!0),r.length}function ge(){return r}return Object.assign(i,{next:y,previous:V,goTo:E}),{panelIndex:t,panelDirectives:D,updatePanelsList:de,updatePanelIndex:G,getPanelContent:he,getEnabledPanels:ce,getPanels:ge,isValidPanelName:d,keepAliveProps:b,needsUniqueKeepAliveWrapper:_,goToPanelByOffset:P,goToPanel:E,nextPanel:y,previousPanel:V}}var ie=j({name:"QTabPanel",props:$e,setup(e,{slots:a}){return()=>S("div",{class:"q-tab-panel",role:"tabpanel"},z(a.default))}}),oa=j({name:"QTabPanels",props:{...ea,...xe},emits:aa,setup(e,{slots:a}){const i=se(),n=ye(e,i.proxy.$q),{updatePanelsList:r,getPanelContent:o,panelDirectives:t}=na(),h=v(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(r(a),Ke("div",{class:h.value},o(),"pan",e.swipeable,()=>t.value))}});const ta={props:{danhSachKhachHang:{type:Array,required:!0}},emits:["chon-khach-hang","them-khach-hang","sua-khach-hang","xoa-khach-hang"],setup(e,{emit:a}){const i=Y(),n=x(""),r=x("T\u1EA5t c\u1EA3"),o=v(()=>i.state.taiTuc.loaiBaoHiemOptions),t=v(()=>{let g=e.danhSachKhachHang;if(n.value){const c=n.value.toLowerCase();g=g.filter(f=>f.hoTen.toLowerCase().includes(c)||f.soDienThoai.includes(c)||f.email.toLowerCase().includes(c))}return r.value!=="T\u1EA5t c\u1EA3"&&(g=g.filter(c=>c.hop_dongs.filter(b=>b.loaiBaoHiem===r.value).length>0)),g});return{searchText:n,filterLoaiBaoHiem:r,loaiBaoHiemOptions:o,danhSachKhachHangLoc:t,chonKhachHang:g=>{a("chon-khach-hang",g)},themKhachHangMoi:()=>{a("them-khach-hang")},suaKhachHang:g=>{a("sua-khach-hang",g)},xoaKhachHang:g=>{a("xoa-khach-hang",g)}}}},la={class:"row q-col-gutter-sm q-mb-md"},ia={class:"col-6"},sa={class:"col-6"},ra={class:"text-grey-8 q-gutter-xs"},ua={key:0,class:"text-center q-pa-md"};function ca(e,a,i,n,r,o){return T(),M("div",null,[C("div",la,[C("div",ia,[l(K,{modelValue:n.searchText,"onUpdate:modelValue":a[0]||(a[0]=t=>n.searchText=t),label:"T\xECm ki\u1EBFm",dense:"",outlined:""},null,8,["modelValue"])]),C("div",sa,[l(Xe,{modelValue:n.filterLoaiBaoHiem,"onUpdate:modelValue":a[1]||(a[1]=t=>n.filterLoaiBaoHiem=t),options:n.loaiBaoHiemOptions,label:"L\u1ECDc theo lo\u1EA1i b\u1EA3o hi\u1EC3m",dense:"",outlined:"","emit-value":"","map-options":""},null,8,["modelValue","options"])])]),l(ze,{bordered:"",separator:""},{default:p(()=>[(T(!0),M(_e,null,Se(n.danhSachKhachHangLoc,t=>re((T(),A(Re,{key:t.id,clickable:""},{default:p(()=>[l(X,{avatar:""},{default:p(()=>[l(Pe,{icon:"person",color:"primary","text-color":"white"})]),_:1}),l(X,null,{default:p(()=>[l(oe,{onClick:h=>n.chonKhachHang(t)},{default:p(()=>[we(F(t.hoTen),1)]),_:2},1032,["onClick"]),l(oe,{caption:"",lines:"2"},{default:p(()=>[C("div",null,F(t.soDienThoai),1),C("div",null,F(t.email),1)]),_:2},1024)]),_:2},1024),l(X,{side:""},{default:p(()=>[C("div",ra,[l(Q,{size:"12px",flat:"",dense:"",round:"",icon:"edit",onClick:$(h=>n.suaKhachHang(t),["stop"])},null,8,["onClick"]),l(Q,{size:"12px",flat:"",dense:"",round:"",icon:"delete",onClick:$(h=>n.xoaKhachHang(t.id),["stop"])},null,8,["onClick"])])]),_:2},1024)]),_:2},1024)),[[Qe]])),128)),n.danhSachKhachHangLoc.length?Ve("",!0):(T(),M("div",ua," Kh\xF4ng c\xF3 kh\xE1ch h\xE0ng n\xE0o. "))]),_:1})])}var ha=R(ta,[["render",ca]]);const da={props:{khachHang:{type:Object,default:null}},emits:["dong-dialog","luu-thong-tin"],setup(e,{emit:a}){Y();const i=x({id:null,hoTen:"",ngaySinh:"",soDienThoai:"",email:"",diaChi:"",maSoBhxh:""});return ue(()=>{e.khachHang&&(i.value={...e.khachHang})}),{form:i,submitForm:()=>{a("luu-thong-tin",i.value)},dongDialog:()=>{a("dong-dialog")}}}};function ga(e,a,i,n,r,o){return T(),A(Be,{style:{"min-width":"350px"}},{default:p(()=>[l(qe,null,{default:p(()=>a[6]||(a[6]=[C("div",{class:"text-h6"},"Th\xF4ng tin kh\xE1ch h\xE0ng",-1)])),_:1}),l(We,{onSubmit:n.submitForm,class:"q-gutter-md"},{default:p(()=>[l(K,{modelValue:n.form.maSoBhxh,"onUpdate:modelValue":a[0]||(a[0]=t=>n.form.maSoBhxh=t),label:"M\xE3 s\u1ED1 BHXH"},null,8,["modelValue"]),l(K,{modelValue:n.form.hoTen,"onUpdate:modelValue":a[1]||(a[1]=t=>n.form.hoTen=t),label:"H\u1ECD v\xE0 t\xEAn","lazy-rules":"",rules:[t=>t&&t.length>0||"Vui l\xF2ng nh\u1EADp h\u1ECD t\xEAn"]},null,8,["modelValue","rules"]),l(K,{modelValue:n.form.ngaySinh,"onUpdate:modelValue":a[2]||(a[2]=t=>n.form.ngaySinh=t),label:"Ng\xE0y sinh",type:"date"},null,8,["modelValue"]),l(K,{modelValue:n.form.soDienThoai,"onUpdate:modelValue":a[3]||(a[3]=t=>n.form.soDienThoai=t),label:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"},null,8,["modelValue"]),l(K,{modelValue:n.form.email,"onUpdate:modelValue":a[4]||(a[4]=t=>n.form.email=t),label:"Email",type:"email"},null,8,["modelValue"]),l(K,{modelValue:n.form.diaChi,"onUpdate:modelValue":a[5]||(a[5]=t=>n.form.diaChi=t),label:"\u0110\u1ECBa ch\u1EC9",type:"textarea"},null,8,["modelValue"]),l(Le,{align:"right",class:"text-primary"},{default:p(()=>[re(l(Q,{flat:"",label:"\u0110\xF3ng"},null,512),[[je]]),l(Q,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var ma=R(da,[["render",ga]]);const pa={name:"CustomerContract",components:{CustomerList:ha,ContractList:Ye,CustomerForm:ma,ContractForm:me},setup(){const e=Y(),a=x("khachHang"),i=x(!1),n=x(!1),r=v(()=>e.state.khachHang.danhSachKhachHang),o=v(()=>e.state.khachHang.khachHangDangChon),t=v(()=>o.value?e.state.khachHang.khachHangDangChon.hop_dongs:[]),h=v(()=>e.state.hopDong.hopDongDangChon);ue(()=>{e.dispatch("khachHang/layDanhSachKhachHang"),e.dispatch("hopDong/layDanhSachHopDong")});const H=d=>{e.dispatch("khachHang/chonKhachHang",d),a.value="hopDong"},D=()=>{e.dispatch("khachHang/chonKhachHang",null),i.value=!0},u=d=>{e.dispatch("khachHang/chonKhachHang",d),i.value=!0},g=d=>{e.dispatch("khachHang/xoaKhachHang",d)},c=()=>{i.value=!1},f=d=>{d.id?e.dispatch("khachHang/suaKhachHang",d):e.dispatch("khachHang/themKhachHang",d),c()},b=()=>{e.dispatch("hopDong/chonHopDong",null),n.value=!0},_=d=>{e.dispatch("hopDong/chonHopDong",d),n.value=!0},y=d=>{e.dispatch("hopDong/xoaHopDong",d)},V=()=>{n.value=!1};return{tab:a,dialogKhachHangMo:i,dialogHopDongMo:n,danhSachKhachHang:r,khachHangDangChon:o,danhSachHopDongTheoKhachHang:t,hopDongDangChon:h,chonKhachHang:H,themKhachHangMoi:D,suaKhachHang:u,xoaKhachHang:g,dongDialogKhachHang:c,luuThongTinKhachHang:f,themHopDongMoi:b,suaHopDong:_,xoaHopDong:y,dongDialogHopDong:V,luuThongTinHopDong:d=>{d.id?e.dispatch("hopDong/suaHopDong",d):e.dispatch("hopDong/themHopDong",d),V()}}}},fa={class:"row q-col-gutter-md"},va={class:"col-12"},Ha={class:"col-12"},Da={key:1,class:"text-center q-pa-md"};function ba(e,a,i,n,r,o){const t=B("customer-list"),h=B("contract-list"),H=B("customer-form"),D=B("contract-form");return T(),A(Fe,{class:"q-pa-md"},{default:p(()=>[C("div",fa,[C("div",va,[l(Ee,null,{default:p(()=>[l(pe),l(Q,{label:"Th\xEAm kh\xE1ch h\xE0ng m\u1EDBi",color:"primary",onClick:n.themKhachHangMoi},null,8,["onClick"])]),_:1})]),C("div",Ha,[l(Oe,{modelValue:n.tab,"onUpdate:modelValue":a[0]||(a[0]=u=>n.tab=u),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:p(()=>[l(te,{name:"khachHang",label:"Kh\xE1ch h\xE0ng"}),l(te,{name:"hopDong",label:"H\u1EE3p \u0111\u1ED3ng"})]),_:1},8,["modelValue"]),l(Me),l(oa,{modelValue:n.tab,"onUpdate:modelValue":a[1]||(a[1]=u=>n.tab=u),animated:""},{default:p(()=>[l(ie,{name:"khachHang"},{default:p(()=>[l(t,{"danh-sach-khach-hang":n.danhSachKhachHang,onChonKhachHang:n.chonKhachHang,onThemKhachHang:n.themKhachHangMoi,onSuaKhachHang:n.suaKhachHang,onXoaKhachHang:n.xoaKhachHang},null,8,["danh-sach-khach-hang","onChonKhachHang","onThemKhachHang","onSuaKhachHang","onXoaKhachHang"])]),_:1}),l(ie,{name:"hopDong"},{default:p(()=>[n.khachHangDangChon?(T(),A(h,{key:0,"khach-hang-id":n.khachHangDangChon.id,"danh-sach-hop-dong":n.danhSachHopDongTheoKhachHang,onThemHopDong:n.themHopDongMoi,onSuaHopDong:n.suaHopDong,onXoaHopDong:n.xoaHopDong},null,8,["khach-hang-id","danh-sach-hop-dong","onThemHopDong","onSuaHopDong","onXoaHopDong"])):(T(),M("div",Da," Ch\u1ECDn m\u1ED9t kh\xE1ch h\xE0ng \u0111\u1EC3 xem danh s\xE1ch h\u1EE3p \u0111\u1ED3ng. "))]),_:1})]),_:1},8,["modelValue"])])]),l(ee,{modelValue:n.dialogKhachHangMo,"onUpdate:modelValue":a[2]||(a[2]=u=>n.dialogKhachHangMo=u),persistent:""},{default:p(()=>[l(H,{"khach-hang":n.khachHangDangChon,onDongDialog:n.dongDialogKhachHang,onLuuThongTin:n.luuThongTinKhachHang},null,8,["khach-hang","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"]),l(ee,{modelValue:n.dialogHopDongMo,"onUpdate:modelValue":a[3]||(a[3]=u=>n.dialogHopDongMo=u),persistent:""},{default:p(()=>[l(D,{"hop-dong":n.hopDongDangChon,"khach-hang-id":n.khachHangDangChon?n.khachHangDangChon.id:null,onDongDialog:n.dongDialogHopDong,onLuuThongTin:n.luuThongTinHopDong},null,8,["hop-dong","khach-hang-id","onDongDialog","onLuuThongTin"])]),_:1},8,["modelValue"])]),_:1})}var Pa=R(pa,[["render",ba]]);export{Pa as default};
