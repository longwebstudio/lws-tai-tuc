import{c as V,b as k,_ as C,Y as S,r as T,a as w,D as Q,w as H,a1 as b,Z as p,$ as h,a2 as u,al as I,a5 as y,am as O,a4 as B,ar as d,a6 as F,au as N,F as x,a3 as f,an as U}from"./index.2523b0c0.js";import{Q as D,C as M}from"./ThuTienForm.54564711.js";import{Q as q}from"./QForm.519ad712.js";var Z=V({name:"QSpace",setup(){const o=k("div",{class:"q-space"});return()=>o}});const z={name:"ContractForm",props:{hopDong:{type:Object,default:null},khachHangId:{type:Number,required:!0},mode:{type:String,default:""}},emits:["dong-dialog","luu-thong-tin"],setup(o,{emit:n}){const t=S(),a=T({id:null,khach_hang_id:o.khachHangId,loai_bao_hiem_id:null,ten_goi_bao_hiem:"",ngay_bat_dau:new Date().toISOString().slice(0,10),ngay_ket_thuc:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().slice(0,10),phi_bao_hiem:null,phuong_thuc_dong:12}),m=w(()=>t.state.taiTuc.loaiBaoHiemOptions),_=[{label:"1 th\xE1ng",value:1},{label:"3 th\xE1ng",value:3},{label:"6 th\xE1ng",value:6},{label:"12 th\xE1ng",value:12},{label:"24 th\xE1ng",value:24},{label:"36 th\xE1ng",value:36},{label:"48 th\xE1ng",value:48},{label:"60 th\xE1ng",value:60}];Q(()=>{if(o.hopDong)a.value={...o.hopDong};else if(o.mode==="gia-han"){const l=t.state.taiTuc.khachHangDangChon,i=t.getters["hopDong/getHopDongById"](l.hop_dong_id);a.value.khach_hang_id=o.khachHangId,a.value.ngay_bat_dau=e(i.ngay_ket_thuc),a.value.loai_bao_hiem_id=i.loai_bao_hiem_id,a.value.ten_goi_bao_hiem=i.ten_goi_bao_hiem,a.value.phi_bao_hiem=i.phi_bao_hiem}}),H([()=>a.value.phuong_thuc_dong,()=>a.value.ngay_bat_dau,()=>{var l;return(l=o.hopDong)==null?void 0:l.ngay_ket_thuc}],()=>{var l;o.mode==="gia-han"&&a.value.phuong_thuc_dong&&a.value.ngay_bat_dau&&(a.value.ngay_ket_thuc=s(a.value.ngay_bat_dau,(l=o.hopDong)==null?void 0:l.ngay_ket_thuc,a.value.phuong_thuc_dong))});const e=l=>{const i=new Date(l);return i.setDate(i.getDate()+1),i.toISOString().slice(0,10)},s=(l,i,v)=>{const r=new Date(i),c=new Date;let g=r;return r<=c&&(g=c),g.setMonth(g.getMonth()+v),g.setDate(g.getDate()-1),g.toISOString().slice(0,10)};return{form:a,loaiBaoHiemOptions:m,phuongThucDongOptions:_,submitForm:()=>{n("luu-thong-tin",a.value)},dongDialog:()=>{n("dong-dialog")},ngayTiepTheo:e,tinhNgayKetThuc:s}}},K={class:"text-h6"};function Y(o,n,t,a,m,_){return b(),p(U,{style:{"min-width":"350px"}},{default:h(()=>[u(O,null,{default:h(()=>[I("div",K,y(t.mode==="gia-han"?"Gia h\u1EA1n h\u1EE3p \u0111\u1ED3ng":t.hopDong?"Ch\u1EC9nh s\u1EEDa h\u1EE3p \u0111\u1ED3ng":"Th\xEAm h\u1EE3p \u0111\u1ED3ng m\u1EDBi"),1)]),_:1}),B(" Khachs hangf id "+y(t.khachHangId)+" ",1),u(q,{onSubmit:a.submitForm,class:"q-gutter-md"},{default:h(()=>[u(D,{modelValue:a.form.loai_bao_hiem_id,"onUpdate:modelValue":n[0]||(n[0]=e=>a.form.loai_bao_hiem_id=e),options:a.loaiBaoHiemOptions,label:"Lo\u1EA1i b\u1EA3o hi\u1EC3m","emit-value":"","map-options":"",disable:t.mode==="gia-han","lazy-rules":"",rules:[e=>e&&e>1||"Vui l\xF2ng ch\u1ECDn lo\u1EA1i b\u1EA3o hi\u1EC3m"]},null,8,["modelValue","options","disable","rules"]),u(d,{modelValue:a.form.ten_goi_bao_hiem,"onUpdate:modelValue":n[1]||(n[1]=e=>a.form.ten_goi_bao_hiem=e),label:"T\xEAn g\xF3i b\u1EA3o hi\u1EC3m","lazy-rules":"",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp t\xEAn g\xF3i"]},null,8,["modelValue","rules"]),u(d,{modelValue:a.form.ngay_bat_dau,"onUpdate:modelValue":n[2]||(n[2]=e=>a.form.ngay_bat_dau=e),label:"Ng\xE0y b\u1EAFt \u0111\u1EA7u",type:"date",disable:t.mode==="gia-han"},null,8,["modelValue","disable"]),u(d,{modelValue:a.form.ngay_ket_thuc,"onUpdate:modelValue":n[3]||(n[3]=e=>a.form.ngay_ket_thuc=e),label:"Ng\xE0y k\u1EBFt th\xFAc",type:"date",rules:[e=>e&&e.length>0||"Vui l\xF2ng nh\u1EADp ng\xE0y k\u1EBFt th\xFAc",e=>e>a.form.ngay_bat_dau||"Ng\xE0y k\u1EBFt th\xFAc ph\u1EA3i sau ng\xE0y b\u1EAFt \u0111\u1EA7u"]},null,8,["modelValue","rules"]),u(d,{modelValue:a.form.phi_bao_hiem,"onUpdate:modelValue":n[4]||(n[4]=e=>a.form.phi_bao_hiem=e),label:"M\u1EE9c ph\xED",type:"number"},null,8,["modelValue"]),t.mode==="gia-han"?(b(),p(D,{key:0,modelValue:a.form.phuong_thuc_dong,"onUpdate:modelValue":n[5]||(n[5]=e=>a.form.phuong_thuc_dong=e),options:a.phuongThucDongOptions,label:"Ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng","emit-value":"","map-options":"","lazy-rules":"",rules:[e=>e!==null||"Vui l\xF2ng ch\u1ECDn ph\u01B0\u01A1ng th\u1EE9c \u0111\xF3ng"]},null,8,["modelValue","options","rules"])):F("",!0),u(N,{align:"right",class:"text-primary"},{default:h(()=>[x(u(f,{flat:"",label:"\u0110\xF3ng",onClick:a.dongDialog},null,8,["onClick"]),[[M]]),u(f,{flat:"",label:"L\u01B0u",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})}var E=C(z,[["render",Y]]);export{E as C,Z as Q};
